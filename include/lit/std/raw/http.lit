require("promise")
openLibrary("network")

class HTTP {
	post(url, data) {
		function read(request, callback) {
			if (!request.write()) {
				Timer.add(() => read(request, callback), 0)
			} else {
				callback()
			}
		}

		function write(request, callback) {
			var result

			if !(result = request.read()) {
				Timer.add(() => write(request, callback), 0)
			} else {
				callback(result)
			}
		}

		return new Promise((resolve, reject) => {
			var request = new NetworkRequest(url)

			write(request, () => {
				read(request, (result) => {
					resolve(result)
				})
			})
		})
	}

	get(url, data) {

	}
}